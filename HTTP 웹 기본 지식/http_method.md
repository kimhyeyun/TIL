_22.06.21_

# HTTP λ©”μ„λ“
1. [HTTP APIλ¥Ό λ§λ“¤μ–΄λ³΄μ](HTTP-APIλ¥Ό-λ§λ“¤μ–΄λ³΄μ)
2. [HTTP λ©”μ„λ“](HTTP-λ©”μ„λ“)
3. [HTTP λ©”μ„λ“μ μ†μ„±](HTTP-λ©”μ„λ“μ-μ†μ„±)
4. [HTTP λ©”μ„λ“ ν™μ©](HTTP-λ©”μ„λ“-ν™μ©)

## HTTP APIλ¥Ό λ§λ“¤μ–΄λ³΄μ
### μ”κµ¬μ‚¬ν•­
**νμ› μ •λ³΄ κ΄€λ¦¬ APIλ¥Ό λ§λ“¤μ–΄λΌ.**
- νμ› λ©λ΅ μ΅°ν
- νμ› μ΅°ν
- νμ› λ“±λ΅
- νμ› μμ •
- νμ› μ‚­μ 

### API URI μ„¤κ³„
**URI (Uniform Resource Identifier)**
- νμ› λ©λ΅ μ΅°ν /read-member-list
- νμ› μ΅°ν /read-member-by-id
- νμ› λ“±λ΅ /create-member
- νμ› μμ • /update-member
- νμ› μ‚­μ  /delete-member

#### μ΄κ²ƒμ€ μΆ‹μ€ URI μ„¤κ³„μΌκΉ???????
β… κ°€μ¥ μ¤‘μ”ν• κ²ƒμ€ **λ¦¬μ†μ¤ μ‹λ³„**

### API URI κ³ λ―Ό
- λ¦¬μ†μ¤μ μλ―Έλ” λ­κΉ?
  - νμ›μ„ λ“±λ΅ν•κ³  μμ •ν•κ³  μ΅°νν•λ”κ² λ¦¬μ†μ¤κ°€ μ•„λ‹λ‹¤!
  - μ) λ―Έλ„¤λ„μ„ μΊλΌ β†’ λ―Έλ„¤λ„μ΄ λ¦¬μ†μ¤
  - **νμ›μ΄λΌλ” κ°λ… μμ²΄κ°€ λ°”λ΅ λ¦¬μ†μ¤λ‹¤.**
- λ¦¬μ†μ¤λ¥Ό μ–΄λ–»κ² μ‹λ³„ν•λ”κ² μΆ‹μ„κΉ?
  - νμ›μ„ λ“±λ΅ν•κ³  μμ •ν•κ³  μ΅°νν•λ” κ²ƒμ„ λ¨λ‘ λ°°μ 
  - **νμ›μ΄λΌλ” λ¦¬μ†μ¤λ§ μ‹λ³„ν•λ©΄ λλ‹¤. β†’ νμ› λ¦¬μ†μ¤λ¥Ό URIμ— λ§¤ν•‘**

#### λ¦¬μ†μ¤ μ‹λ³„, URI κ³„μΈµ κµ¬μ΅° ν™μ©
- **νμ›** λ©λ΅ μ΅°ν /members
- **νμ›** μ΅°ν /members/{id}
- **νμ›** λ“±λ΅ /members/{id}
- **νμ›** μμ • /members/{id}
- **νμ›** μ‚­μ  /members/{id}
- μ°Έκ³  : κ³„μΈµ κµ¬μ΅°μƒ μƒμ„λ¥Ό μ»¬λ ‰μ…μΌλ΅ λ³΄κ³  λ³µμλ‹¨μ–΄ μ‚¬μ© κ¶μ¥(member β†’ members)
π™‹ μ–΄λ–»κ² κµ¬λ¶„ν•λ‚μ” β‡ π™‹β€

#### λ¦¬μ†μ¤μ™€ ν–‰μ„λ¥Ό λ¶„λ¦¬
**κ°€μ¥ μ¤‘μ”ν• κ²ƒμ€ λ¦¬μ†μ¤λ¥Ό μ‹λ³„ν•λ” κ²ƒ**
- **URIλ” λ¦¬μ†μ¤λ§ μ‹λ³„!**
- **λ¦¬μ†μ¤**μ™€ ν•΄λ‹Ή λ¦¬μ†μ¤λ¥Ό λ€μƒμΌλ΅ ν•λ” **ν–‰μ„**μ„ λ¶„λ¦¬
  - λ¦¬μ†μ¤ : νμ›
  - ν–‰μ„ : μ΅°ν, λ“±λ΅, μ‚­μ , λ³€κ²½
- λ¦¬μ†μ¤λ” λ…μ‚¬, ν–‰μ„λ” λ™μ‚¬
- ν–‰μ„(λ©”μ„λ“)λ” μ–΄λ–»κ² κµ¬λ¶„?

## HTTP λ©”μ„λ“
### μ¤‘λ¥ 
- μ£Όμ” λ©”μ„λ“
  - GET : λ¦¬μ†μ¤ μ΅°ν
  - POST : μ”μ²­ λ°μ΄ν„° μ²λ¦¬, μ£Όλ΅ λ“±λ΅μ— μ‚¬μ©
  - PUT : λ¦¬μ†μ¤λ¥Ό λ€μ²΄, ν•΄λ‹Ή λ¦¬μ†μ¤κ°€ μ—†μΌλ©΄ μƒμ„±
  - PATCH : λ¦¬μ†μ¤ λ¶€λ¶„ λ³€κ²½
  - DELETE : λ¦¬μ†μ¤ μ‚­μ 
- κΈ°νƒ€ λ©”μ„λ“
  - **HEAD** : GETκ³Ό λ™μΌν•μ§€λ§ λ©”μ‹μ§€ λ¶€λ¶„μ„ μ μ™Έν•κ³ , μƒνƒ μ¤„κ³Ό ν—¤λ”λ§ λ°ν™
  - **OPTIONS** : λ€μƒ λ¦¬μ†μ¤μ— λ€ν• ν†µμ‹  κ°€λ¥ μµμ…(λ©”μ„λ“)μ„ μ„¤λ…(μ£Όλ΅ CORSμ—μ„ μ‚¬μ©)
  - **CONNECT** : λ€μƒ μμ›μΌλ΅ μ‹λ³„λλ” μ„λ²„μ— λ€ν• ν„°λ„μ„ μ„¤μ •
  - **TRACE** : λ€μƒ λ¦¬μ†μ¤μ— λ€ν• κ²½λ΅λ¥Ό λ”°λΌ λ©”μ‹μ§€ λ£¨ν”„λ°± ν…μ¤νΈλ¥Ό μν–‰

#### GET
```
GET /search?q=hello&hl=ko HTTP/1.1  
Host: www.google.com
```
- λ¦¬μ†μ¤ μ΅°ν
- μ„λ²„μ— μ „λ‹¬ν•κ³  μ‹¶μ€ λ°μ΄ν„°λ” query(μΏΌλ¦¬ νλΌλ―Έν„°, μΏΌλ¦¬ μ¤νΈλ§)μ„ ν†µν•΄μ„ μ „λ‹¬
- λ©”μ‹μ§€ λ°”λ””λ¥Ό μ‚¬μ©ν•΄μ„ λ°μ΄ν„°λ¥Ό μ „λ‹¬ν•  μ μμ§€λ§, μ§€μ›ν•μ§€ μ•λ” κ³³μ΄ λ§μ•„μ„ κ¶μ¥ν•μ§€ μ•μ

#### POST
```
POST /members HTTP/1.1
Content-Type: application/json
{
  "username": "hello",
  "age": 20
}
```
- μ”μ²­ λ°μ΄ν„° μ²λ¦¬
- **λ©”μ‹μ§€ λ°”λ””λ¥Ό ν†µν•΄ μ„λ²„λ΅ μ”μ²­ λ°μ΄ν„° μ „λ‹¬**
- μ„λ²„λ” μ”μ²­ λ°μ΄ν„°λ¥Ό **μ²λ¦¬**
  - λ©”μ‹μ§€ λ°”λ””λ¥Ό ν†µν•΄ λ“¤μ–΄μ¨ λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•λ” λ¨λ“  κΈ°λ¥μ„ μν–‰ν•¨
- μ£Όλ΅ μ „λ‹¬λ λ°μ΄ν„°λ΅ μ‹ κ· λ¦¬μ†μ¤ λ“±λ΅, ν”„λ΅μ„Έμ¤ μ²λ¦¬μ— μ‚¬μ©

##### μμ‹
- μ¤ν™ : POST λ©”μ„λ“λ” **λ€μƒ λ¦¬μ†μ¤κ°€ λ¦¬μ†μ¤μ κ³ μ  ν• μλ―Έ μ²΄κ³„μ— λ”°λΌ μ”μ²­μ— ν¬ν•¨λ ν‘ν„μ„ μ²λ¦¬ν•λ„λ΅ μ”μ²­**
- μλ¥Ό λ“¤μ–΄ POSTλ” λ‹¤μκ³Ό κ°™μ€ κΈ°λ¥μ— μ‚¬μ©λ¨
  - HTML μ–‘μ‹μ— μ…λ ¥λ ν•„λ“μ™€ κ°™μ€ λ°μ΄ν„° λΈ”λ΅μ„ λ°μ΄ν„° μ²λ¦¬ ν”„λ΅μ„Έμ¤μ— μ κ³µ
    - μ) HTML FORMμ— μ…λ ¥ν• μ •λ³΄λ΅ νμ› κ°€μ…, μ£Όλ¬Έλ“±μ—μ„ μ‚¬μ©
  - κ²μ‹ν, λ‰΄μ¤ κ·Έλ£Ή, λ©”μΌλ§ λ¦¬μ¤νΈ, λΈ”λ΅κ·Έ λλ” μ μ‚¬ν• κΈ°μ‚¬ κ·Έλ£Ήμ— λ©”μ‹μ‹ κ²μ‹
    - μ) κ²μ‹ν κΈ€μ“°κΈ°, λ“κΈ€ λ‹¬
  - μ„λ²„κ°€ μ•„μ§ μ‹λ³„ν•μ§€ μ•μ€ μƒ λ¦¬μ†μ¤ μƒμ„±
    - μ) μ‹ κ· μ£Όλ¬Έ μƒμ„±
  - κΈ°μ΅΄ μμ›μ— λ°μ΄ν„° μ¶”κ°€
    - μ) ν• λ¬Έμ„ λμ— λ‚΄μ© μ¶”κ°€ν•κΈ°
- **μ •λ¦¬ : μ΄ λ¦¬μ†μ¤ URIμ— POST μ”μ²­μ΄ μ¤λ©΄ μ”μ²­ λ°μ΄ν„°λ¥Ό μ–΄λ–»κ² μ²λ¦¬ν• μ§€ λ¦¬μ†μ¤λ§λ‹¤ λ”°λ΅ μ •ν•΄μ•Ό ν•¨ β†’ μ •ν•΄μ§„ κ²ƒμ΄ μ—†μ**

##### μ •λ¦¬
- **1. μƒ λ¦¬μ†μ¤ μƒμ„±(λ“±λ΅)**
  - μ„λ²„κ°€ μ•„μ§ μ‹λ³„ν•μ§€ μ•μ€ μƒ λ¦¬μ†μ¤ μƒμ„±
- **2. μ”μ²­ λ°μ΄ν„° μ²λ¦¬**
  - λ‹¨μν λ°μ΄ν„°λ¥Ό μƒμ„±ν•κ±°λ‚, λ³€κ²½ν•λ” κ²ƒμ„ λ„μ–΄μ„ ν”„λ΅μ¤μ„Έλ¥Ό μ²λ¦¬ν•΄μ•Ό ν•λ” κ²½μ°
  - μ) μ£Όλ¬Έμ—μ„ κ²°μ  μ™„λ£ β†’ λ°°λ‹¬ μ‹μ‘ β†’ λ°°λ‹¬ μ™„λ£ μ²λΌ λ‹¨μν κ°’ λ³€κ²½μ„ λ„μ–΄ ν”„λ΅μ„Έμ¤μ μƒνƒκ°€ λ³€κ²½λλ” κ²½μ°
  - POSTμ κ²°κ³Όλ΅ μƒλ΅μ΄ λ¦¬μ†μ¤κ°€ μƒμ„±λμ§€ μ•μ„ μ λ„ μμ
  - μ) POST /orders/{orderId}/start-delivery (**μ»¨νΈλ΅¤ URI**)
- **3. λ‹¤λ¥Έ λ©”μ„λ“λ΅ μ²λ¦¬ν•κΈ° μ• λ§¤ν• κ²½μ°**
  - μ) JSONμΌλ΅ μ΅°ν λ°μ΄ν„°λ¥Ό λ„κ²¨μ•Ό ν•λ”λ°, GET λ©”μ„λ“λ¥Ό μ‚¬μ©ν•κΈ° μ–΄λ ¤μ΄ κ²½μ°
  - μ• λ§¤ν•λ©΄ POST

#### PUT
```
PUT /members/100 HTTP/1.1
Content-Type: application/json
{
  "username": "hello",
  "age": 20
}
```
- **λ¦¬μ†μ¤λ¥Ό λ€μ²΄**
  - λ¦¬μ†μ¤κ°€ μμΌλ©΄ λ€μ²΄
  - λ¦¬μ†μ¤κ°€ μ—†μΌλ©΄ μƒμ„±
  - μ‰½κ² μ΄μ•ΌκΈ°ν•΄μ„ λ®μ–΄λ²„λ¦Ό
- **μ¤‘μ”! ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤λ¥Ό μ‹λ³„**
  - ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤ μ„μΉλ¥Ό μ•κ³  URI μ§€μ •
  - POSTμ™€ μ°¨μ΄μ 

#### PATCH
```
PATCH /members/100 HTTP/1.1
Content-Type: application/json
{
  "age": 50
}
```
- λ¦¬μ†μ¤ λ¶€λ¶„ λ³€κ²½

#### DELETE
```
DELETE /members/100 HTTP/1.1
Host: localhost:8080
```
- λ¦¬μ†μ¤ μ κ±°

## HTTP λ©”μ„λ“μ μ†μ„±
- μ•μ „(Safe Methods)
- λ©±λ“±(Idempotent Methods)
- μΊμ‹ κ°€λ¥(Cacheable Methods)

![img_37.png](img_37.png)

### μ•μ „(Safe)
- νΈμ¶ν•΄λ„ λ¦¬μ†μ¤λ¥Ό λ³€κ²½ν•μ§€ μ•λ”λ‹¤
- Q : κ·Έλλ„ κ³„μ† νΈμ¶ν•΄μ„, λ΅κ·Έ κ°™μ€κ² μ“μ—¬μ„ μ¥μ• κ°€ λ°μƒν•λ©΄??
- A : μ•μ „μ€ ν•΄λ‹Ή λ¦¬μ†μ¤λ§ κ³ λ ¤ν•λ‹¤. κ·Έλ° λ¶€λ¶„κΉμ§€ κ³ λ ¤ν•μ§€ μ•μ

### λ©±λ“±(Idempotent)
- f(f(x)) = f(x)
- ν• λ² νΈμ¶ν•λ“  λ‘ λ² νΈμ¶ν•λ“  100λ² νΈμ¶ν•λ“  κ²°κ³Όκ°€ λ‘κ°™μ
- λ©±λ“± λ©”μ„λ“
  - **GET** : ν• λ² μ΅°νν•λ“ , λ‘ λ² μ΅°νν•λ“  κ°™μ€ κ²°κ³Όκ°€ μ΅°νλ¨
  - **PUT** : κ²°κ³Όλ¥Ό λ€μ²΄ν•¨. λ”°λΌμ„ κ°™μ€ μ”μ²­μ„ μ—¬λ¬ λ² ν•΄λ„ μµμΆ… κ²°κ³Όλ” κ°™μ
  - **DELETE** : κ²°κ³Όλ¥Ό μ‚­μ ν•¨. κ°™μ€ μ”μ²­μ„ μ—¬λ¬ λ² ν•΄λ„ μ‚­μ λ κ²°κ³Όλ” λ‘κ°™μ
  - **β… POST** : λ©±λ“±μ΄ μ•„λ‹λ‹¤!! λ‘ λ² νΈμ¶ν•λ©΄ κ°™μ€ κ²°μ κ°€ μ¤‘λ³µν•΄μ„ λ°μƒν•  μ μμ
- ν™μ©
  - μλ™ λ³µκµ¬ λ©”μ»¤λ‹μ¦
  - μ„λ²„κ°€ TIMEOUT λ“±μΌλ΅ μ •μƒ μ‘λ‹µμ„ λ»μ£Όμ—μ„ λ•, ν΄λΌμ΄μ–ΈνΈκ°€ κ°™μ€ μ”μ²­μ„ λ‹¤μ‹ ν•΄λ„ λλ”κ°€? νλ‹¨ κ·Όκ±°
- Q : μ¬μ”μ²­ μ¤‘κ°„μ— λ‹¤λ¥Έ κ³³μ—μ„ λ¦¬μ†μ¤λ¥Ό λ³€κ²½ν•΄λ²„λ¦¬λ©΄?
  - μ‚¬μ©μ 1 : GET β†’ username:A, age:20
  - μ‚¬μ©μ 2 : PUT β†’ username:A, age:30
  - μ‚¬μ©μ 1 : GET β†’ username:A, age:30 β†’ μ‚¬μ©μ2μ μν–¥μΌλ΅ λ°”λ€ λ°μ΄ν„° μ΅°ν
- **A : λ©±λ“±μ€ μ™Έλ¶€ μ”μΈμΌλ΅ μ¤‘κ°„μ— λ¦¬μ†μ¤κ°€ λ³€κ²½λλ” κ²ƒκΉμ§€λ” κ³ λ ¤ν•μ§€λ” μ•λ”λ‹¤.**

### μΊμ‹ κ°€λ¥(Cacheable)
- μ‘λ‹µ κ²°κ³Ό λ¦¬μ†μ¤λ¥Ό μΊμ‹ν•΄λ„ μ‚¬μ©ν•΄λ„ λλ”κ°€?
- GET, HEAD, POST, PATCH μΊμ‹ κ°€λ¥
- μ‹¤μ λ΅λ” GET, HEAD μ •λ„λ§ μΊμ‹λ΅ μ‚¬μ©
  - POST, PATCHλ” λ³Έλ¬Έ λ‚΄μ©κΉμ§€ μΊμ‹ ν‚¤λ΅ κ³ λ ¤ν•΄μ•Ό ν•λ”λ°, κµ¬ν„μ΄ μ‰½μ§€ μ•μ


## HTTP λ©”μ„λ“ ν™μ©
- [ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„λ΅ λ°μ΄ν„° μ „μ†΅](ν΄λΌμ΄μ–ΈνΈμ—μ„-μ„λ²„λ΅-λ°μ΄ν„°-μ „μ†΅)
- [HTTP API μ„¤κ³„ μμ‹](HTTP-API-μ„¤κ³„-μμ‹)

### ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„λ΅ λ°μ΄ν„° μ „μ†΅ 
#### λ°μ΄ν„° μ „λ‹¬ λ°©μ‹μ€ ν¬κ² 2κ°€μ§€
- **μΏΌλ¦¬ νλΌλ―Έν„°λ¥Ό ν†µν• λ°μ΄ν„° μ „μ†΅**
  - GET
  - μ£Όλ΅ μ •λ ¬ ν•„ν„°(κ²€μƒ‰μ–΄)
- **λ©”μ‹μ§€ λ°”λ””λ¥Ό ν†µν• λ°μ΄ν„° μ „μ†΅**
  - POST, PUT, PATCH
  - νμ› κ°€μ…, μƒν’ μ£Όλ¬Έ, λ¦¬μ†μ¤ λ“±λ΅, λ¦¬μ†μ¤ λ³€κ²½

##### 4κ°€μ§€ μƒν™©
1.**μ •μ  λ°μ΄ν„° μ΅°ν**
  - μ΄λ―Έμ§€, μ •μ  ν…μ¤νΈ λ¬Έμ„
2. **λ™μ  λ°μ΄ν„° μ΅°ν**
    - μ£Όλ΅ κ²€μƒ‰, κ²μ‹ν λ©λ΅μ—μ„ μ •λ ¬ ν•„ν„°(κ²€μƒ‰μ–΄)
3. **HTML Formμ„ ν†µν• λ°μ΄ν„° μ „μ†΅**
    - νμ› κ°€μ…, μƒν’ μ£Όλ¬Έ, λ°μ΄ν„° λ³€κ²½
4. **HTTP APIλ¥Ό ν†µν• λ°μ΄ν„° μ „μ†΅**
    - νμ› κ°€μ…, μƒν’ μ£Όλ¬Έ, λ°μ΄ν„° λ³€κ²½
    - μ„λ²„ to μ„λ²„, μ•± ν΄λΌμ΄μ–ΈνΈ, μ›Ή ν΄λΌμ΄μ–ΈνΈ(Ajax)

###### 1. μ •μ  λ°μ΄ν„° μ΅°ν
**μΏΌλ¦¬ νλΌλ―Έν„° λ―Έμ‚¬μ©**  
ν΄λΌμ΄μ–ΈνΈ
```
GET /static/star.jpg HTTP/1.1
Host: localhost:8080
```
- μ΄λ―Έμ§€, μ •μ  ν…μ¤νΈ λ¬Έμ„
- μ΅°νλ” GET μ‚¬μ©
- μ •μ  λ°μ΄ν„°λ” μΌλ°μ μΌλ΅ μΏΌλ¦¬ νλΌλ―Έν„° μ—†μ΄ λ¦¬μ†μ¤ κ²½λ΅λ΅ λ‹¨μν•κ² μ΅°ν κ°€λ¥

###### 2. λ™μ  λ°μ΄ν„° μ΅°ν
**μΏΌλ¦¬ νλΌλ―Έν„° μ‚¬μ©**  
ν΄λΌμ΄μ–ΈνΈ
```
GET /search?q=hello&hl=ko HTTP/1.1
Host: www.google.com
```
μ„λ²„ β†’ μΏΌλ¦¬ νλΌλ―Έν„°λ¥Ό κΈ°λ°μΌλ΅ μ •λ ¬ ν•„ν„°ν•΄μ„ κ²°κ³Όλ¥Ό λ™μ μΌλ΅ μƒμ„±

- μ£Όλ΅ κ²€μƒ‰, κ²μ‹ν λ©λ΅μ—μ„ μ •λ ¬ ν•„ν„°(κ²€μƒ‰μ–΄)
- μ΅°ν μ΅°κ±΄μ„ μ¤„μ—¬μ£Όλ” ν•„ν„°, μ΅°ν κ²°κ³Όλ¥Ό μ •λ ¬ν•λ” μ •λ ¬ μ΅°κ±΄μ— μ£Όλ΅ μ‚¬μ©
- μ΅°νλ” GET μ‚¬μ©
- GETμ€ μΏΌλ¦¬ νλΌλ―Έν„° μ‚¬μ©ν•΄μ„ λ°μ΄ν„°λ¥Ό μ „λ‹¬